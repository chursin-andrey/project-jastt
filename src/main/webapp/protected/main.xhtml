<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/templates/commonLayout.xhtml">
    
    <h:outputStylesheet library="css" name="main.css"  />
	<style type="text/css">
	.dateFrom  input {
	left: 210px;
	height: 50px;
	margin-left: 111px;
}
	</style>
	 
	<ui:define name="content">
	<h:form id="form">

	<h:panelGrid columns="4" width="1040"  cellspacing="20" >
		<h:column>
	
		<h:outputLabel value="Project:" ><br /><br />
			<h:selectOneMenu value="#{reportBean.project_name}" style="width:200px;">
			    <f:selectItem itemLabel="Please select a project... " noSelectionOption="true" />
   				<f:selectItems var="project" value="#{reportBean.projects}" itemValue="#{project.name}" itemLabel="#{project.name} " />
   				<f:ajax listener="#{reportBean.changeProject}" render="issue status assignee" />
			</h:selectOneMenu>
		</h:outputLabel>
		<br /><br />
		<h:outputLabel value="Time:" /><br /><br />
		<h:panelGrid columns="2" width="250" cellspacing="0">
			<h:column style="height:200;">
				<h:selectOneRadio value="#{reportBean.timespent}" style="height:200;" layout="pageDirection">
   					<f:selectItem itemValue="allTime" style="margin-bottom:10px;" itemLabel="" /> 
   					<f:selectItem itemValue="date" itemLabel="" />
   					<f:ajax listener="#{reportBean.changeTime}" render="issue allTime dateFrom dateTo" />
				</h:selectOneRadio>
				
			</h:column>
			<h:column>
				<h:selectOneMenu id="allTime" value="#{reportBean.timespent}" disabled="#{reportBean.disableSelectTime}" style="width:200px;" >
   					<f:selectItem itemLabel="AllTime" noSelectionOption="true" />
				</h:selectOneMenu>
				<br /><br />
				 <p:outputLabel value="from: " />
       			 <p:calendar id="dateFrom" size="5" style="font-size:11px;" value="#{reportBean.dateFrom}" disabled="#{reportBean.disableSelectDate}"/>
 				  <p:outputLabel value=" to: " />
       			 <p:calendar id="dateTo" size="5" style="font-size:11px;" value="#{reportBean.dateTo}" disabled="#{reportBean.disableSelectDate}" />
			</h:column>
		</h:panelGrid>
		
			
		
		</h:column>
		<h:column>
			<h:outputLabel value="Task:" ><br /><br />
			<h:selectOneMenu id="issue"  value="#{reportBean.issue_id}" disabled="#{reportBean.disableMenu}" style="width:200px;">
				<f:selectItem itemLabel="Please select a task... " noSelectionOption="true" />
   				<f:selectItems var="issue" value="#{reportBean.issues}" itemValue="#{issue.id}" itemLabel="#{issue.key}" />
			<f:ajax listener="#{reportBean.changeIssue}" render="assignee" />
			</h:selectOneMenu>
			</h:outputLabel>
			<br /><br />
			<h:outputLabel value="Status:" ><br /><br />
				<h:selectOneMenu id="status"  value="#{reportBean.status}" onchange="submit" immediate="true" disabled="#{reportBean.disableMenu}" style="width:200px;">
					<f:selectItem itemLabel="Please select a status... " noSelectionOption="true" />
					<f:selectItem itemValue="0" itemLabel="Open" />
					<f:selectItem itemValue="1" itemLabel="Resolved" />
				</h:selectOneMenu>
			</h:outputLabel> <br /><br /><br />
		</h:column>
		<h:column>
		<h:outputLabel value="Member:" ><br /><br />
			<h:selectOneMenu id="assignee"  value="#{reportBean.project_id}" disabled="#{reportBean.disableMenu}" converter="javax.faces.Integer" style="width:200px;">
				<f:selectItem itemLabel="Please select a member... " noSelectionOption="true" />
   				<f:selectItems var="assignee" value="#{reportBean.assignees}" itemValue="#{assignee.id} " itemLabel="#{assignee.name} " />
   				<f:ajax listener="#{reportBean.changeAssignee}" render="issue" />
			</h:selectOneMenu>
		</h:outputLabel>
		<br /><br />
		<h:outputLabel value="Members:" ><br /><br />
			<h:selectOneMenu id="assignees"  value="#{reportBean.project_id}" disabled="#{reportBean.disableMenu}" style="width:200px;">
   				<f:selectItems itemValue="2" itemLabel=" " />
			</h:selectOneMenu>
		</h:outputLabel> <br /><br /><br />
		</h:column>
		<h:column>
		<br />
			<h:commandButton value="Add" action="result" style="width:150px;"/>
			<br /><br /><br /><br />
			<h:commandButton value="Clear" action="result" style="width:150px;"/>
			<br /><br />
		</h:column>
	</h:panelGrid>
	



		

	<h:panelGrid columns="3" width="400"  cellspacing="20">
	<h:commandButton value="Show" update="Report" action="#{reportBean.showReport()}" style="width:100px;"/>
	<h:commandButton value="Cancel" action="cancel" style="width:100px;"/>
	<h:commandButton value="Update" action="update" style="width:100px;"/>
	</h:panelGrid>
	
	
		<p:tabView activeIndex="0">
			<p:tab title="Details">
					<p:dataTable var="details" id="Details" lazy="true">
						<f:facet name="header">Total Elapsed Time              
    						<p:column datasource="Details" trigger="toggler"/>
                			<p:outputPanel>
                				<h:outputText value="hours:"/> 
		        				<p:inputText id="globalFilter1" onkeyup="PF('Details').filter()" style="width:250px" placeholder="hours"/>
                    			<h:outputText value="	minuts:"/>
                    			<p:inputText id="globalFilter2" onkeyup="PF('Detailse').filter()" style="width:250px" placeholder="minuts"/>
                			</p:outputPanel>            
            			</f:facet>
            			<p:column headerText="Date"/>
						<p:column headerText="Member"/>
						<p:column headerText="Project"/>
						<p:column headerText="Task"/>
						<p:column headerText="Status"/>
						<p:column headerText="Summary"/>
						<p:column headerText="Hours"/>
					</p:dataTable>
			</p:tab>
        	<p:tab title="Report">   
					<p:dataTable var="report" value="#{reportBean.issues}" id="Report" lazy="true">
						<f:facet name="header">Total Elapsed Time              
                			<p:column datasource="Report" trigger="toggler"/>
               				<p:outputPanel>
                    			<h:outputText value="hours:"/> 
                    			<p:inputText id="globalFilter1" onkeyup="PF('Report').filter()" style="width:250px" placeholder="hours"/>
                    			<h:outputText value="	minuts:"/>
                    			<p:inputText id="globalFilter2" onkeyup="PF('Report').filter()" style="width:250px" placeholder="minuts"/>
                			</p:outputPanel>
                		</f:facet>
						<p:column headerText="Member">
							<h:outputText  value="#{report.assignee.name}"  />
               			 </p:column>
						<p:column headerText="Project">
							<h:outputText  value="#{report.project.name}"  />
               			 </p:column>
						<p:column headerText="Task">
							<h:outputText  value="#{report.key}"  />
						</p:column>
						<p:column headerText="Hours">
							<h:outputText  value="#{report.timeSpent}"  />
						</p:column>
					</p:dataTable>
        	</p:tab>
    	</p:tabView>	
</h:form>
	</ui:define>
</ui:composition>    