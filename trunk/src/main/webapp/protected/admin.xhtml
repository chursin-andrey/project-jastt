<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/templates/commonLayout.xhtml">
	
	<ui:define name="content">
			
		
		<div align="left">
		
		<h:form >	
				<h:panelGrid>
					<p:commandButton value="Add User" type="button" onclick="PF('dlgCreateAccount').show();"  />
				</h:panelGrid>
		 </h:form>
				
		<h:form >
			<p:dialog header="Create User Account" widgetVar="dlgCreateAccount" modal="true" minHeight="600">
				<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
					<p:outputLabel for="name" value="Name:" />
					<p:inputText id="name" required="true" value="#{usersBean.name}" />
					<p:outputLabel for="login" value="Login:"/>
					<p:inputText id="login" required="true" value="#{usersBean.login}" />
									
					<p:outputLabel for="url" value="URL:" />
					<p:inputText id="url" required="true" value="#{usersBean.url}" />
					
					<p:commandButton value="Save" id="saveUser"
						icon="ui-icon-disk" action="#{usersBean.createUser()}" />
					<p:commandButton value="Cancel" id="cancelEditing" onclick="PF('dlgCreateAccount').hide();"
						icon="ui-icon-close" />
				</h:panelGrid>									
			</p:dialog>
		</h:form>	
				
		<p:spacer height="10" />
				
		
		<h:form id="userList" >
			<p:dataTable id="userListTable" var="user" value="#{userListBean.users}">
    					
    			<p:column headerText="Login">
    				<h:outputText value="#{user.login}" />
    			</p:column>
    				
    				<p:column headerText="Name">
    					<h:outputText value="#{user.firstName}" />
    				</p:column>
    				
    				<p:column headerText="">
        				<p:commandLink value="Edit" style="margin:  5px" />
        				
        				<p:commandLink   value="Delete" style="margin:  5px" actionListener="#{usersBean.deleteUser(user.login)}"
        						update=":userList:userListTable" >	 
        						
        					<p:confirm header="Confirmation" message="Do you really want to remove user?" icon="ui-icon-alert" />			
        				</p:commandLink>
        				
        				<p:confirmDialog global="true" >
        					<div align="center">
								<p:commandButton value="Yes" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
								<p:commandButton value="No" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
							</div>		
						</p:confirmDialog>

    				</p:column>
    					
    				
				</p:dataTable>
			</h:form>
							
	 </div>
						
	</ui:define>
</ui:composition>    